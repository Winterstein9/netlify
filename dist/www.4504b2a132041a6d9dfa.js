(()=>{"use strict";var t={d:(e,i)=>{for(var s in i)t.o(i,s)&&!t.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:i[s]})}};t.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),t.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{var e;t.g.importScripts&&(e=t.g.location+"");var i=t.g.document;if(!e&&i&&(i.currentScript&&(e=i.currentScript.src),!e)){var s=i.getElementsByTagName("script");s.length&&(e=s[s.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),t.p=e})(),t.d({},{J:()=>w,X:()=>S});const e=t.p+"4d55a5a422256d7112c1.png",i=t.p+"7a2db657f39d2d127580.png",s=t.p+"ada834a0777309f064ca.png",a=t.p+"c90381c8a0082f54f534.png",h=t.p+"a708aeef177340e86890.png",l=t.p+"b1a6bbacbd26e525fe4d.png",r=t.p+"175958bdcf96f647c0ef.png",o=t.p+"06f2d92e23495c47ee07.png",c=t.p+"21c32236bc1d4bb26bf1.png",d=t.p+"d5a7fa3041a9ab68f061.png",n=t.p+"3dc991822067485711ad.png",m=t.p+"005139b5cd5103f275fe.png",g=t.p+"9d0b44e40dce6e4131bd.png",f=t.p+"6206bb18e158844d89f8.png",p=t.p+"8fada1b9916c61683d13.png";class u{column=6;rows=5;padding=10;field=[];width=50;height=50;marginLeftX=w.width/2-3*this.width-2.5*this.padding;marginTopY=70;score=0;attempts=0;endGame=0;blockSquares=!0;totalScore=0;baseImgs=[e,i,s,a,h,l,r,o,c,d,n,m,g,f,p];imgs=[];compareImages=[];constructor(){this.setEvent(),this.textScore(),this.textAttempts()}leadUpField(){this.field=[],this.setEvent(),this.score=0,this.textScore(),this.attempts=0,this.textAttempts(),this.endGame=0,this.blockSquares=!0,this.totalScore=0}generateArray(t,e){let i=t*e/2;for(let t=0;t<i;t++)this.imgs.push(this.baseImgs[t]),this.imgs.push(this.baseImgs[t]);this.imgs.sort((()=>Math.random()-.5))}createSquares(){let t=0;for(let e=0;e<this.column;e++){this.field[e]=[];for(let i=0;i<this.rows;i++)this.field[e][i]={x:0,y:0,width:50,height:50,status:1,id:t,image:new Image,i:this.imgs[t]},t++;this.endGame=t/2}console.log("END: ",this.field,"this.field")}drowImgAll(t,e,i,s){return new Promise((a=>{t.src=e,t.onload=function(){S.drawImage(t,i,s,50,50),a()}}))}drowImg(t,e,i,s){t.src=e,t.onload=function(){S.drawImage(t,i,s,50,50)}}createField(){this.generateArray(this.column,this.rows),this.createSquares();for(let t=0;t<this.column;t++)for(let e=0;e<this.rows;e++)1==this.field[t][e].status&&(this.field[t][e].x=t*(this.field[t][e].width+this.padding)+this.marginLeftX,this.field[t][e].y=e*(this.field[t][e].height+this.padding)+this.marginTopY,this.drowSquare(this.field[t][e].x,this.field[t][e].y,this.field[t][e].width,this.field[t][e].height))}drowSquare(t,e,i,s){S.beginPath(),S.rect(t,e,i,s),S.fillStyle="#0095DD",S.fill(),S.closePath()}setEvent(){document.addEventListener("click",this.mauseClick.bind(this),!1)}mauseClick(t){if(!this.blockSquares){let e=t.clientX-w.offsetLeft,i=t.clientY-w.offsetTop;e>0&&e<w.width&&i>0&&i<w.height&&this.clickSquardHandler(e,i)}}clickSquardHandler(t,e){for(let i=0;i<this.column;i++)for(let s=0;s<this.rows;s++){let a=this.field[i][s];if(t>a.x&&t<a.x+a.width&&e>a.y&&e<a.y+a.height&&this.compareImages.length<2&&0!=this.field[i][s].status&&2!=this.field[i][s].status){let t=this.field[i][s];this.clearA(t.x,t.y,t.width,t.height),1==t.status&&(this.drowImg(t.image,t.i,t.x,t.y),this.compare(t))}}}clearA(t,e,i=w.width,s=w.height){S.clearRect(t,e,i,s)}compare(t){let e=t=>{for(let e=0;e<this.compareImages.length;e++){let i=this.compareImages[e];1==t&&(this.clearA(i.x,i.y,i.width,i.height),this.drowSquare(i.x,i.y,i.width,i.height)),i.status=t}this.compareImages=[]};console.log("compare"),this.compareImages.length<2&&(this.compareImages.push(t),console.log(this.compareImages,"<----8"),2==this.compareImages.length&&(this.compareImages[0].i==this.compareImages[1].i?(this.score+=10,this.textScore(),this.attempts+=1,this.textAttempts(),e(2),this.setEndGame()):(setTimeout(e,800,1),this.attempts+=1,this.textAttempts())))}setEndGame(){this.endGame--,console.log("this.endGame",this.endGame),0==this.endGame&&(this.textYouWin(),this.textTotalScore(),this.blockSquares=!0,console.log("END GAME"))}textScore(){this.clearA(50,10,140,20),S.font="20px Arial",S.fillStyle="#0095DD",S.fillText("score: "+this.score,50,30)}textAttempts(){this.clearA(50,40,220,20),S.font="20px Arial",S.fillStyle="#0095DD",S.fillText("attempts: "+this.attempts,50,60)}textYouWin(t=!1){t?this.clearA(w.width/2-55,5,220,20):(S.font="25px Arial",S.fillStyle="#0095DD",S.fillText("You Win",w.width/2-55,30))}textTotalScore(t=!1){this.totalScore=this.score-this.attempts,t?this.clearA(w.width/2-20,35,220,20):(S.font="20px Arial",S.fillStyle="#0095DD",S.fillText(this.totalScore,w.width/2-20,55))}}const w=document.getElementById("myCanvas"),S=w.getContext("2d");new class{gameStatus="0_start game";intervalTime=10;SI;gameOver=!1;score=0;lives=3;field;constructor(){this.field=new u,this.setEventTextButtonStartGame(),this.textButtonStartGame(),this.field.createField()}setEventTextButtonStartGame(){document.addEventListener("click",this.mauseClickCursorPointer.bind(this),!1)}mauseClickCursorPointer(t){let e=t.clientX-w.offsetLeft,i=t.clientY-w.offsetTop;e>0&&e<w.width&&i>0&&i<w.height&&e>w.width/2-100&&e<w.width/2+100&&i>w.height-80&&i<w.height-50&&("0_start game"==this.gameStatus?(console.log("start game"),this.field.blockSquares=!1,this.openALLImages(),this.textRestartGame(),this.gameStatus="restart game"):"restart game"==this.gameStatus?(this.closeALLImages(),this.restartGame(),this.openALLImages(),this.field.blockSquares=!1):this.gameStatus)}openALLImages(){for(let t=0;t<this.field.column;t++)for(let e=0;e<this.field.rows;e++){let i=this.field.field[t][e];this.field.clearA(i.x,i.y,i.width,i.height),this.field.drowImgAll(i.image,i.i,i.x,i.y)}setTimeout(this.closeALLImages.bind(this),2e3)}closeALLImages(){console.log("this.closeALLImages, 1000",this.field.column);for(let t=0;t<this.field.column;t++){console.log("lknkjbjb");for(let e=0;e<this.field.rows;e++){let i=this.field.field[t][e];this.field.clearA(i.x,i.y,i.width,i.height),this.field.drowSquare(i.x,i.y,i.width,i.height)}}}restartGame(){this.field.leadUpField(),this.field.createField(),this.gameStatus="restart game"}textButtonStartGame(){S.clearRect(w.width/2-120,w.height-50-30,300,30),S.font="30px Arial",S.fillStyle="#0095DD",S.fillText("START GAME",w.width/2-100,w.height-50)}textRestartGame(){S.clearRect(w.width/2-100,w.height-50-30,300,30),S.font="30px Arial",S.fillStyle="#0095DD",S.fillText("RESTART GAME",w.width/2-120,w.height-50)}clearA(t,e,i=w.width,s=w.height){S.clearRect(t,e,i,s)}}})();